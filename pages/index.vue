<script lang="ts" setup>
import { ref } from "vue";
// const { data: posts } = await useWpApi().getPosts<any>();
const response = await useWpApi().getPosts<any>();
const posts = ref(response.data || []); // Zawrzyj dane w Ref
const lastThreePosts = ref(posts.value.slice(0, 3));
</script>

<template>
  <Header>
    <div class="flex-wrap md:mx-10">
      <!-- Image -->
      <img
        class="float-left w-5/12 rounded-[2.5rem] p-5 opacity-70 md:w-1/6"
        src="../assets/img/myfoto3dsmall.png"
      />
      <!-- Text -->
      <h2 class="mt-10 text-center text-3xl italic md:text-start">
        ğŸ‘‹ğŸ» Witaj, jestem Paula!
      </h2>
      <p class="p-2 text-base italic text-gray-900 sm:text-xs">
        Jestem poczÄ…tkujÄ…cym frontem developerem
      </p>
      <p class="py-2 text-lg">
        Jako samouk programowania i mocno wierzÄ™, Å¼e zaangaÅ¼owanie, wysiÅ‚ek i
        determinacja pozwalajÄ… osiÄ…gnÄ…Ä‡ sukces w kaÅ¼dej dziedzinie.
      </p>
      <p class="py-2 text-lg">
        Na moim blogu skupiam siÄ™ gÅ‚Ã³wnie na technologiach webowych, ale rÃ³wnieÅ¼
        bÄ™dÄ™ dzieliÄ‡ siÄ™ osobistymi doÅ›wiadczeniami oraz historiÄ… mojej wÅ‚asnej
        drogi w nauce programowania. ChcÄ™ stworzyÄ‡ miejsce, ktÃ³re bÄ™dzie
        wspieraÄ‡ poczÄ…tkujÄ…cych, pomagajÄ…c im pokonaÄ‡ trudnoÅ›ci na fascynujÄ…cej
        Å›cieÅ¼ce nauki programowania.
      </p>

      <h4 class="mt-5 text-gray-700">
        <Icon name="circle-flags:en" class="text-xl"></Icon>
        Do you prefer the English language ? No problem ! I always publish my
        articles on platforms such as DEV.to and on my LinkedIn profile.
      </h4>
    </div>
  </Header>
  <!-- Newest posts -->
  <section class="container my-16">
    <h2 class="mt-8 text-3xl font-bold">Ostanio dodane posty</h2>
    <div class="grid gap-10 pt-8 md:grid-cols-3">
      <Card
        v-for="(post, index) in lastThreePosts"
        :key="index"
        :title="post.title.rendered"
        :excerpt="post.excerpt.rendered"
        :image="post._embedded['wp:featuredmedia']?.[0]?.source_url"
        :slug="post.slug"
      >
      </Card>
    </div>
  </section>
</template>
